<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planetario Halley</title>
    @Scripts.Render("~/bundles/modernizr")
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @Styles.Render("~/Content/css")
    @Styles.Render("~/Utils/css")
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="~/Utils/css/layout.css">

</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" style="background-color: #133b5c;">
        <div class="container-fluid">
            @Html.ActionLink("Planetario Halley", "InformacionBasica", "Home", new { area = "" }, new { @class = "navbar-brand", @style = "color:#fff" })
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        @Html.ActionLink("Informacion", "HorariosParqueoTransporte", "Home", new { area = "" }, new { @class = "nav-link" })
                    </li>
                    <li class="nav-item">
                        @Html.ActionLink("Funcionarios", "ListaFuncionarios", "Funcionarios", new { area = "" }, new { @class = "nav-link" })
                    </li>
                    <li class="nav-item">
                        @Html.ActionLink("Noticias", "listadoDeNoticias", "Noticias", new { area = "" }, new { @class = "nav-link" })
                    </li>
                    <li class="nav-item">
                        @Html.ActionLink("FAQ", "PreguntasFrecuentes", "PreguntasFrecuentes", new { area = "" }, new { @class = "nav-link" })
                    </li>
                    <li class="nav-item">
                        @Html.ActionLink("Actividades", "listadoDeActividades", "Actividades", new { area = "" }, new { @class = "nav-link" })
                    </li>
                    <li class="nav-item">
                        @Html.ActionLink("Materiales Educativos", "listadoDeMateriales", "MaterialEducativo", new { area = "" }, new { @class = "nav-link" })
                    </li>
                    <li class="nav-item">
                        @Html.ActionLink("Calendario", "CalendarioFenomenos", "Calendario", new { area = "" }, new { @class = "nav-link" })
                    </li>

                    <li class="nav-item">
                        @Html.ActionLink("Cuestionarios", "ListaCuestionarios", "Cuestionario", new { area = "" }, new { @class = "nav-link" })
                    </li>
                    <li class="nav-item">
                        @Html.ActionLink("Juegos", "Lista", "Juegos", new { area = "" }, new { @class = "nav-link" })
                    </li>
                    <li class="nav-item">
                        @Html.ActionLink("Comparar cuerpos", "CompararCuerpos", "Home", new { area = "" }, new { @class = "nav-link" })
                    </li>

                    <li class="nav-item"><a class="nav-link" href="/Ventas/ListaProductos" id="tienda">Tienda</a></li>

                </ul>
                <ul class="navbar-nav ms-auto">

                    @if (Request.IsAuthenticated)
                    {
                        if (((Context.User.Identity as FormsIdentity).Ticket.UserData) == "Funcionario")
                        {
                            <li class="nav-item"><a class="nav-link" href="/Home/PanelDeAdministracion"><i class="fa fa-cogs"></i> Panel de administracion</a></li>

                        }
                        <li class="nav-item" id="membresia"></li>
                        <li class="nav-item" id="carrito"></li>

                        <li class="nav-item"><a class="nav-link" href="/Personas/CerrarSesion"><i class="fa fa-sign-out"></i> Logout</a></li>
                    }
                    else
                    {
                        <li class="nav-item"><a class="nav-link" href="/Clientes/Registro"><span class="fa fa-user-plus "></span> Registro</a></li>

                        <li class="nav-item"><a class="nav-link" href="/Personas/IniciarSesion" id="login"><span class="fa fa-sign-in"></span> Login</a></li>

                    }
                </ul>
            </div>
        </div>
    </nav>

    @RenderBody()

    <footer class="site-footer">
        <p style="text-align:center"> @DateTime.Now</p>
        <div class="container">
            <div class="row">
                <div class="col-md-8 col-sm-6 col-xs-12">
                    <p class="copyright-text">
                        Copyright &copy; 2021 Derechos reservados
                        <a href="#">Planetario Halley</a>.
                    </p>
                </div>

                <div class="col-md-4 col-sm-6 col-xs-12">
                    <ul class="social-icons">
                        <li><a class="facebook" href="https://www.facebook.com/plugins/share_button.php?href=https%3A%2F%2Fimgur.com%2Fa%2FRfPVpdJ&layout=button_count&size=small&appId=175191305830549&width=99&height=20" title="Compartir en Facebook"><i class="fa fa-facebook"></i></a></li>
                        <li><a class="twitter" href="https://twitter.com/intent/tweet?source=https%3A%2F%2Fimgur.com%2Fa%2FRfPVpdJ&text=:%20https%3A%2F%2Fimgur.com%2Fa%2FRfPVpdJ" title="Tweetear"><i class="fa fa-twitter"></i></a></li>
                        <li><a class="linkedin" href="http://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fimgur.com%2Fa%2FRfPVpdJ&title=&summary=&source=https%3A%2F%2Fimgur.com%2Fa%2FRfPVpdJ" title="Compartir en LinkedIn"><i class="fa fa-linkedin"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        function obtenerMembresia() {
            $.getJSON('/Ventas/ObtenerMembresia', function (data) {
                if (data.membresia != "No Disponible") {
                    let content = "";
                    const membresia = document.getElementById('membresia');
                    content += `<a class="nav-link" href="/Membresias/Comprar"><i class ="fa fa-address-book-o"></i> `
                    content += data.membresia;
                    content += `</a>`;
                    membresia.innerHTML = content;
                }
            });
        }

        function obtenerCantidadCarrito() {
            $.getJSON('/Ventas/ObtenerCantidadCarrito', function (data) {
                let content = "";
                console.log(data.cantidad);
                const carrito = document.getElementById('carrito');
                content += `<a class="nav-link" href="/Ventas/Carrito" id="carrito"><i class="fa fa-shopping-cart"></i> Carrito( `
                content += data.cantidad;
                content += ` )</a>`;
                carrito.innerHTML = content;
            });
        }
        obtenerMembresia();
        obtenerCantidadCarrito();

    </script>
    @RenderSection("scripts", required: false)
</body>
</html>
