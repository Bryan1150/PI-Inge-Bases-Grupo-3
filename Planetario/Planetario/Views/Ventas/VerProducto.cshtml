<style>
    img {
        width:100%;
        height: 100%;
        object-fit: cover;
        border-radius: 0.5em;
    }
    div.row {
        margin:0;
    }
    #tarjetaDescripcion {
        min-height:100%;
    }
</style>

<body>
    <span class="titulo">@ViewBag.producto.Nombre</span>
    <div class="row">
        <div class="col-md-4">
            <img class="border" src="/Ventas/ObtenerImagen/@ViewBag.producto.Id">
        </div>
        <div class="col-md-5">
            <div class="card bg-light" id="tarjetaDescripcion">
                <div class="card-body">
                    <h4 class="card-title">Descripción</h4>
                    <p class="card-text">@ViewBag.producto.Descripcion</p>
                    <hr />
                    <p class="card-text"><strong>Categoría:</strong> @ViewBag.producto.Categoria</p>
                    <p class="card-text"><strong>Tamaño:</strong> @ViewBag.producto.Tamano</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title"><strong>Precio: </strong>₡@ViewBag.producto.Precio</h4>
                    <p class="card-text">Cantidad disponible: @ViewBag.producto.CantidadDisponible</p>
                </div>
                <div class="card-footer">
                    <h5>Cantidad: </h5>
                    <input type="number" min="1" value="1" id="entradaCantidad" class="form-control" />
                    <br />
                    <input type="submit" onclick="agregarAlCarrito(@ViewBag.producto.Id)" class="btn btn-success btn-lg btn-lg container-fluid" value="Agregar al carrito" data-bs-toggle="modal" data-bs-target="#exampleModal" />
                </div>
            </div>
        </div>
    </div>



    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h3>Producto agregado al carrito!</h3>
                </div>
                <div class="modal-footer">
                    @Html.ActionLink("Ir al carrito", "Carrito", "Ventas", new { }, null)
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" aria-label="Close">Seguir Comprando</button>
                </div>
            </div>
        </div>
    </div>


    <script>
        function agregarAlCarrito(id) {
            let cantidad = 1;
            let entradaCantidad = document.getElementById("entradaCantidad").value;
            if (!isNaN(entradaCantidad)) {
                cantidad = entradaCantidad;
            }
            $.getJSON('/Ventas/AgregarAlCarrito', { idComprable: id, cantidad: cantidad }, function (data) {
                console.log(data);
            });
        }
    </script>

</body>