@{
    ViewBag.Title = "Actividades";
    string funcionAgregarAlCarrito = Url.Content("~/Ventas/AgregarAlCarrito");
}

<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.actividad.NombreActividad</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="~/Utils/css/main.css">
    <link rel="stylesheet" type="text/css" href="~/Utils/css/verActividad.css">
    <style>
        header,
        section,
        aside {
            margin: 0 1.5% 24px 1.5%;
        }

        section {
            float: left;
            width: 63%;
        }

        aside {
            float: right;
            width: 30%;
        }

        row {
            text-align: center;
        }

        .col {
            margin-bottom: 1em;
        }

        .card {
            margin: 1%;
            border-radius: 15%;
            border-color: #133b5c;
            border-width: .15em;
            box-shadow: 3px 7px #133b5c;
        }

        .site-footer {
            display: none;
        }
    </style>
</head>
<body>
    <div class="row text-center">
        <span class="titulo">@ViewBag.actividad.NombreActividad</span>
    </div>
    <section>
        <div class="row">
            <p class="card-title"> <b>Descripcion:</b> </p>
            <p class="card-text">@ViewBag.actividad.Descripcion</p>
        </div>
        <div class="container">
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-4 text-center">
                <div class="col">
                    <p><span> <i class="fa fa-check"></i><b>Categoria</b> </span></p>
                    <p> @ViewBag.actividad.Categoria </p>
                </div>
                <div class="col">
                    <p><span> <i class="fa fa-check"></i><b>Publico Dirigido</b> </span></p>
                    <p> @ViewBag.actividad.PublicoDirigido </p>
                </div>
                <div class="col">
                    <p><span> <i class="fa fa-check"></i><b>Duracion</b> </span></p>
                    <p> @ViewBag.actividad.Duracion minutos</p>
                </div>
                <div class="col">
                    <p><span> <i class="fa fa-check"></i><b>Complejidad</b> </span></p>
                    <p> @ViewBag.actividad.Complejidad </p>
                </div>
                <div class="col">
                    <p><span> <i class="fa fa-check"></i><b>Precio</b> </span></p>
                    <p> @ViewBag.actividad.PrecioAproximado Colones</p>
                </div>
                <div class="col">
                    <p><span> <i class="fa fa-check"></i><b>Fecha</b> </span></p>
                    <p> @ViewBag.actividad.Fecha </p>
                </div>
                <div class="col">
                    <p><span> <i class="fa fa-check"></i><b>Tipo</b> </span></p>
                    <p> @ViewBag.actividad.Tipo </p>
                </div>
            </div>
        </div>

        <div class="row">
            <p><span> <i class="fa fa-check"></i><b>Topicos</b></span></p>
            @foreach (var topico in ViewBag.topicos)
            {
                <p style="display:inline;">-@topico</p>
            }
        </div>
        <div class="row">
            <p>Contacto del organizador: @ViewBag.actividad.PropuestoPor</p>
        </div>

        <div id="twitch-embed"></div>

        <div class="row">
            <div class="col col-md-4 col-sm-12">
                <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal">
                    Comprar entradas
                </button>

                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Indique la cantidad y escoja los asientos</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body text-center">
                                <div onload="onLoaderFunc()">

                                    <div class="inputForm">
                                        <center>
                                            <input type="hidden" id="Username" value = "@Context.User.Identity.Name" required>
                                            Cantidad de entradas: <input type="number" class="form-control" id="Numseats" min="1" max="10" required>
                                            <br /><br />
                                            <button class="btn btn-outline-primary" onclick="takeData()">Seleccionar asientos</button>
                                            <br />
                                        </center>
                                    </div>
                                    <br /><br />

                                    <div class="seatStructure">
                                        <center>

                                            <table id="seatsBlock">
                                                <p id="notification"></p>
                                                <tr>
                                                    <td colspan="14"><div class="screen">Escenario</div></td>
                                                    <td rowspan="20">
                                                        <div class="smallBox greenBox">Selected Seat</div> <br />
                                                        <div class="smallBox redBox">Reserved Seat</div><br />
                                                        <div class="smallBox emptyBox">Empty Seat</div><br />
                                                    </td>

                                                </tr>

                                                <tr>
                                                    <td></td>
                                                    <td>1</td>
                                                    <td>2</td>
                                                    <td>3</td>
                                                    <td>4</td>
                                                    <td>5</td>
                                                    <td></td>
                                                    <td>6</td>
                                                    <td>7</td>
                                                    <td>8</td>
                                                    <td>9</td>
                                                    <td>10</td>
                                                    <td>11</td>
                                                    <td>12</td>
                                                </tr>

                                                <tr>
                                                    <td>A</td>
                                                    <td><input type="checkbox" class="seats" value="A1"></td>
                                                    <td><input type="checkbox" class="seats" value="A2"></td>
                                                    <td><input type="checkbox" class="seats" value="A3"></td>
                                                    <td><input type="checkbox" class="seats" value="A4"></td>
                                                    <td><input type="checkbox" class="seats" value="A5"></td>
                                                    <td class="seatGap"></td>
                                                    <td><input type="checkbox" class="seats" value="A6"></td>
                                                    <td><input type="checkbox" class="seats" value="A7"></td>
                                                    <td><input type="checkbox" class="seats" value="A8"></td>
                                                    <td><input type="checkbox" class="seats" value="A9"></td>
                                                    <td><input type="checkbox" class="seats" value="A10"></td>
                                                    <td><input type="checkbox" class="seats" value="A11"></td>
                                                    <td><input type="checkbox" class="seats" value="A12"></td>
                                                </tr>

                                                <tr>
                                                    <td>B</td>
                                                    <td><input type="checkbox" class="seats" value="B1"></td>
                                                    <td><input type="checkbox" class="seats" value="B2"></td>
                                                    <td><input type="checkbox" class="seats" value="B3"></td>
                                                    <td><input type="checkbox" class="seats" value="B4"></td>
                                                    <td><input type="checkbox" class="seats" value="B5"></td>
                                                    <td></td>
                                                    <td><input type="checkbox" class="seats" value="B6"></td>
                                                    <td><input type="checkbox" class="seats" value="B7"></td>
                                                    <td><input type="checkbox" class="seats" value="B8"></td>
                                                    <td><input type="checkbox" class="seats" value="B9"></td>
                                                    <td><input type="checkbox" class="seats" value="B10"></td>
                                                    <td><input type="checkbox" class="seats" value="B11"></td>
                                                    <td><input type="checkbox" class="seats" value="B12"></td>
                                                </tr>

                                                <tr>
                                                    <td>C</td>
                                                    <td><input type="checkbox" class="seats" value="C1"></td>
                                                    <td><input type="checkbox" class="seats" value="C2"></td>
                                                    <td><input type="checkbox" class="seats" value="C3"></td>
                                                    <td><input type="checkbox" class="seats" value="C4"></td>
                                                    <td><input type="checkbox" class="seats" value="C5"></td>
                                                    <td></td>
                                                    <td><input type="checkbox" class="seats" value="C6"></td>
                                                    <td><input type="checkbox" class="seats" value="C7"></td>
                                                    <td><input type="checkbox" class="seats" value="C8"></td>
                                                    <td><input type="checkbox" class="seats" value="C9"></td>
                                                    <td><input type="checkbox" class="seats" value="C10"></td>
                                                    <td><input type="checkbox" class="seats" value="C11"></td>
                                                    <td><input type="checkbox" class="seats" value="C12"></td>
                                                </tr>

                                                <tr>
                                                    <td>D</td>
                                                    <td><input type="checkbox" class="seats" value="D1"></td>
                                                    <td><input type="checkbox" class="seats" value="D2"></td>
                                                    <td><input type="checkbox" class="seats" value="D3"></td>
                                                    <td><input type="checkbox" class="seats" value="D4"></td>
                                                    <td><input type="checkbox" class="seats" value="D5"></td>
                                                    <td></td>
                                                    <td><input type="checkbox" class="seats" value="D6"></td>
                                                    <td><input type="checkbox" class="seats" value="D7"></td>
                                                    <td><input type="checkbox" class="seats" value="D8"></td>
                                                    <td><input type="checkbox" class="seats" value="D9"></td>
                                                    <td><input type="checkbox" class="seats" value="D10"></td>
                                                    <td><input type="checkbox" class="seats" value="D11"></td>
                                                    <td><input type="checkbox" class="seats" value="D12"></td>
                                                </tr>

                                                <tr>
                                                    <td>E</td>
                                                    <td><input type="checkbox" class="seats" value="E1"></td>
                                                    <td><input type="checkbox" class="seats" value="E2"></td>
                                                    <td><input type="checkbox" class="seats" value="E3"></td>
                                                    <td><input type="checkbox" class="seats" value="E4"></td>
                                                    <td><input type="checkbox" class="seats" value="E5"></td>
                                                    <td></td>
                                                    <td><input type="checkbox" class="seats" value="E6"></td>
                                                    <td><input type="checkbox" class="seats" value="E7"></td>
                                                    <td><input type="checkbox" class="seats" value="E8"></td>
                                                    <td><input type="checkbox" class="seats" value="E9"></td>
                                                    <td><input type="checkbox" class="seats" value="E10"></td>
                                                    <td><input type="checkbox" class="seats" value="E11"></td>
                                                    <td><input type="checkbox" class="seats" value="E12"></td>
                                                </tr>

                                                <tr class="seatVGap"></tr>

                                                <tr>
                                                    <td>F</td>
                                                    <td><input type="checkbox" class="seats" value="F1"></td>
                                                    <td><input type="checkbox" class="seats" value="F2"></td>
                                                    <td><input type="checkbox" class="seats" value="F3"></td>
                                                    <td><input type="checkbox" class="seats" value="F4"></td>
                                                    <td><input type="checkbox" class="seats" value="F5"></td>
                                                    <td></td>
                                                    <td><input type="checkbox" class="seats" value="F6"></td>
                                                    <td><input type="checkbox" class="seats" value="F7"></td>
                                                    <td><input type="checkbox" class="seats" value="F8"></td>
                                                    <td><input type="checkbox" class="seats" value="F9"></td>
                                                    <td><input type="checkbox" class="seats" value="F10"></td>
                                                    <td><input type="checkbox" class="seats" value="F11"></td>
                                                    <td><input type="checkbox" class="seats" value="F12"></td>
                                                </tr>

                                                <tr>
                                                    <td>G</td>
                                                    <td><input type="checkbox" class="seats" value="G1"></td>
                                                    <td><input type="checkbox" class="seats" value="G2"></td>
                                                    <td><input type="checkbox" class="seats" value="G3"></td>
                                                    <td><input type="checkbox" class="seats" value="G4"></td>
                                                    <td><input type="checkbox" class="seats" value="G5"></td>
                                                    <td></td>
                                                    <td><input type="checkbox" class="seats" value="G6"></td>
                                                    <td><input type="checkbox" class="seats" value="G7"></td>
                                                    <td><input type="checkbox" class="seats" value="G8"></td>
                                                    <td><input type="checkbox" class="seats" value="G9"></td>
                                                    <td><input type="checkbox" class="seats" value="G10"></td>
                                                    <td><input type="checkbox" class="seats" value="G11"></td>
                                                    <td><input type="checkbox" class="seats" value="G12"></td>
                                                </tr>

                                                <tr>
                                                    <td>H</td>
                                                    <td><input type="checkbox" class="seats" value="H1"></td>
                                                    <td><input type="checkbox" class="seats" value="H2"></td>
                                                    <td><input type="checkbox" class="seats" value="H3"></td>
                                                    <td><input type="checkbox" class="seats" value="H4"></td>
                                                    <td><input type="checkbox" class="seats" value="H5"></td>
                                                    <td></td>
                                                    <td><input type="checkbox" class="seats" value="H6"></td>
                                                    <td><input type="checkbox" class="seats" value="H7"></td>
                                                    <td><input type="checkbox" class="seats" value="H8"></td>
                                                    <td><input type="checkbox" class="seats" value="H9"></td>
                                                    <td><input type="checkbox" class="seats" value="H10"></td>
                                                    <td><input type="checkbox" class="seats" value="H11"></td>
                                                    <td><input type="checkbox" class="seats" value="H12"></td>
                                                </tr>

                                                <tr>
                                                    <td>I</td>
                                                    <td><input type="checkbox" class="seats" value="I1"></td>
                                                    <td><input type="checkbox" class="seats" value="I2"></td>
                                                    <td><input type="checkbox" class="seats" value="I3"></td>
                                                    <td><input type="checkbox" class="seats" value="I4"></td>
                                                    <td><input type="checkbox" class="seats" value="I5"></td>
                                                    <td></td>
                                                    <td><input type="checkbox" class="seats" value="I6"></td>
                                                    <td><input type="checkbox" class="seats" value="I7"></td>
                                                    <td><input type="checkbox" class="seats" value="I8"></td>
                                                    <td><input type="checkbox" class="seats" value="I9"></td>
                                                    <td><input type="checkbox" class="seats" value="I10"></td>
                                                    <td><input type="checkbox" class="seats" value="I11"></td>
                                                    <td><input type="checkbox" class="seats" value="I12"></td>
                                                </tr>

                                                <tr>
                                                    <td>J</td>
                                                    <td><input type="checkbox" class="seats" value="J1"></td>
                                                    <td><input type="checkbox" class="seats" value="J2"></td>
                                                    <td><input type="checkbox" class="seats" value="J3"></td>
                                                    <td><input type="checkbox" class="seats" value="J4"></td>
                                                    <td><input type="checkbox" class="seats" value="J5"></td>
                                                    <td></td>
                                                    <td><input type="checkbox" class="seats" value="J6"></td>
                                                    <td><input type="checkbox" class="seats" value="J7"></td>
                                                    <td><input type="checkbox" class="seats" value="J8"></td>
                                                    <td><input type="checkbox" class="seats" value="J9"></td>
                                                    <td><input type="checkbox" class="seats" value="J10"></td>
                                                    <td><input type="checkbox" class="seats" value="J11"></td>
                                                    <td><input type="checkbox" class="seats" value="J12"></td>
                                                </tr>


                                            </table>

                                            <br /><button disabled id="botonConfirmarAsientos" class="btn btn-outline-primary" onclick="updateTextArea()">Confirmar elección de asientos</button>
                                        </center>
                                    </div>

                                    <br /><br />

                                    <div class="displayerBoxes">
                                        <center>
                                            <table class="Displaytable">
                                                <tr>
                                                    <th>Name</th>
                                                    <th>Number of Seats</th>
                                                    <th>Seats</th>
                                                </tr>
                                                <tr>
                                                    <td><textarea id="nameDisplay"></textarea></td>
                                                    <td><textarea id="NumberDisplay"></textarea></td>
                                                    <td><textarea id="seatsDisplay"></textarea></td>
                                                </tr>
                                            </table>
                                        </center>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button id="botonCancelar" type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
                                <button id="botonAgregarAlCarrito" type="button" disabled class="btn btn-success" onclick="agregarAlCarrito()">
                                    <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                                    Agregar al carrito
                                </button>
                                <button id="botonComprar" type="button" disabled class="btn btn-primary" onclick="comprarAhora()">Comprar ahora</button>
                            </div>
                        </div>
                    </div>
                    <script src="~/Utils/js/verActividad.js"></script>
                </div>

            </div>
            @if (Request.IsAuthenticated)
            {
                <div class="col col-md-4 col-sm-12">
                    @Html.ActionLink("Ver facturas", "verFacturasDeActividad",
                        new { actividadNombre = ViewBag.actividad.NombreActividad },
                        new { @class = "btn btn-success", }
                    )
                </div>
            }
        </div>

        <div style="margin-top:75px"></div>

        <script src="https://embed.twitch.tv/embed/v1.js"></script>

        <script type="text/javascript">
        var Link = '@ViewBag.actividad.Link';
        console.log(Link);
        Link = Link.toLowerCase();
        if (Link != null) {
            //Twitch embed.
            new Twitch.Embed("twitch-embed", {
                width: 800,
                height: 700,
                channel: Link,
                theme: 'light'
            });
        };
        </script>

    </section>

    <aside style="width: 15%,">
        <span class="titulo">Actividades Similares:</span>

        @foreach (Planetario.Models.ActividadModel actividad in ViewBag.actividades)
        {
            if (ViewBag.actividad.NombreActividad != actividad.NombreActividad)
            {
                <div class="col">
                    <div class="card">
                        <span class="titulo">
                            @if (@actividad.Tipo == "Charla")
                            {
                                <i class="fa fa-commenting" aria-hidden="true"></i>
                            }
                            else
                            {
                                <i class="fa fa-book" aria-hidden="true"></i>
                            }
                            <br />
                            @Html.ActionLink(@actividad.NombreActividad, "verActividad", "Actividades", new { nombre = @actividad.NombreActividad.ToString() }, new { style = "font-size: 30px" })
                        </span>
                        <div class="detallesActividad" , style="text-align:center">
                            <div>
                                <i class="fa fa-angle-right" aria-hidden="true"></i>
                                <b>Publico Dirigido: </b>@actividad.PublicoDirigido
                            </div>
                            <div>
                                <i class="fa fa-angle-right" aria-hidden="true"></i>
                                <b>Categoria: </b>@actividad.Categoria
                            </div>
                            <div>
                                <i class="fa fa-angle-right" aria-hidden="true"></i>
                                <b>Complejidad: </b>@actividad.Complejidad
                            </div>
                        </div>
                    </div>
                </div>
            }
        }
    </aside>

    <script>

        function agregarAlCarrito() {
            fetch("@funcionAgregarAlCarrito?idComprable=algo;cantidad=4")
                .then(respuesta => {
                    return respuesta.json();
                })
                .then(info => {
                    console.log(info);
                })
        }

        function comprarAhora() {

        }
    </script>
</body>
</html>